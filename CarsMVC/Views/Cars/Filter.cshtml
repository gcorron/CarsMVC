@model CarsMVC.ViewModels.CarsViewModel
@section Scripts
{
    <script>
        $(function () {
            $('input[data-autocomplete]').each(function () {
                var url = $(this).data('autocomplete');
                $(this).autocomplete({
                    source: function (request, response) {
                        $.getJSON(url, {
                            term: request.term
                        }, response);
                    }
                });
            });
        });
    </script>
}
@section AddToHead{
    <link href="~/Content/themes/base/autocomplete.css" rel="stylesheet" />
}

@{
    ViewBag.Title = "Car Search";
}


@using (Html.BeginForm())
{
    @Html.AntiForgeryToken()

    <div class="form-horizontal">
        <h1>Find a Car</h1>

        @Html.ValidationSummary(false, "", new { @class = "text-danger" })

        <div class="row">
            <div class="well col-md-4">
                <div class="row">
                    <div class="col-md-offset-1">
                        <div class="form-group">
                            @Html.LabelFor(model => model.SelectYears, htmlAttributes: new { @class = "control-label" })
                            @Html.DropDownListFor(model => model.Year, new SelectList(Model.SelectYears, "Value", "Text"), "Select Year", new { htmlAttributes = new { @class = "form-control" } })
                        </div>

                        <div class="form-group ui-widget">
                            @Html.LabelFor(model => model.Owner, htmlAttributes: new { @class = "control-label" })
                            @Html.EditorFor(model => model.Owner, new { htmlAttributes = new { @class = "form-control", placeholder = "Any Owner", data_autocomplete = $"{@Url.Action("SearchOwner", "Cars")}" } })
                            @Html.ValidationMessageFor(model => model.Owner, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="col-md-offset-8">
                        <div class="form-group">
                            <input type="submit" value="Go" class="btn btn-default" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    @Html.ActionLink("Add Car", "Create")
}
